Debug.Log=function(n){window.console&&window.console.log&&typeof debug!="undefined"&&debug==!0&&window.console.log(n)};window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n){window.setTimeout(n,1e3/60)}}();PivotViewer.Utils.EscapeMetaChars=function(n){return n.replace(/\|/gi,"\\|").replace(/\//gi,"\\/").replace(/'/gi,"\\'").replace(/,/gi,"\\,").replace(/:/gi,"\\:").replace(/\(/gi,"\\(").replace(/\)/gi,"\\)").replace(/\+/gi,"\\+").replace(/\+/gi,"\\-").replace(/\+/gi,"\\_").replace(/\+/gi,"\\%").replace(/\./gi,"\\_")};PivotViewer.Utils.EscapeItemId=function(n){return n.replace(/\s+/gi,"|").replace(/'/gi,"").replace(/\(/gi,"").replace(/\)/gi,"").replace(/\./gi,"")};PivotViewer.Utils.HtmlSpecialChars=function(n){return jQuery("<div />").text(n).html()};PivotViewer.Utils.Now=function(){return Date.now?Date.now():(new Date).getTime()};PivotViewer.Utils.Min=function(n){return Math.min.apply(null,n)};PivotViewer.Utils.Max=function(n){return Math.max.apply(null,n)};PivotViewer.Utils.OrdinalHistogram=function(n){var t;if(!n instanceof Array)return null;var i=Math.min.apply(null,n),u=Math.max.apply(null,n),f=u-i+1,r=[];for(t=0;t<f;t++)r.push([]);for(t=0;t<n.length;t++)r[n[t]-i].push(n[t]);return{histogram:r,min:i,max:u,binCount:f}};PivotViewer.Utils.Histogram=function(n){var e,f,i,s,h,r,c;if(!n instanceof Array)return null;var u=Math.min.apply(null,n),o=Math.max.apply(null,n),t=(Math.floor(Math.pow(2*n.length,1/3))+1)*2;for(t>n.length?t=n.length:t>10&&(t=10),e=(o+1-(u-1))/t,f=[],i=0;i<t;i++)for(s=u+i*e,h=u+(i+1)*e,f.push([]),r=0,c=n.length;r<c;r++)s<=n[r]&&h>n[r]&&f[i].push(n[r]);return{histogram:f,min:u,max:o,binCount:t}},function(){var n=!1,t=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;Object.subClass=function(i){function u(){!n&&this.init&&this.init.apply(this,arguments)}var e=this.prototype,f,r;n=!0;f=new this;n=!1;for(r in i)f[r]=typeof i[r]=="function"&&typeof e[r]=="function"&&t.test(i[r])?function(n,t){return function(){var r=this._super,i;return this._super=e[n],i=t.apply(this,arguments),this._super=r,i}}(r,i[r]):i[r];return u.prototype=f,u.constructor=u,u.subClass=arguments.callee,u}}();typeof String.prototype.endsWith!="function"&&(String.prototype.endsWith=function(n){return this.indexOf(n,this.length-n.length)!==-1});typeof String.prototype.startsWith!="function"&&(String.prototype.startsWith=function(n){return this.lastIndexOf(n,0)===0});Number.isInteger||(Number.isInteger=function(n){return typeof n=="number"&&isFinite(n)&&n>-9007199254740992&&n<9007199254740992&&Math.floor(n)===n});var tile_sort_by=function(n,t,i){for(var t,r,u=PivotCollection.GetFacetCategoryByName(n),e=[],f=0;f<i.length;f++)e[i[f]]=!0;return r=u.Type==PivotViewer.Models.FacetType.Number||u.Type==PivotViewer.Models.FacetType.Ordinal?function(t){var i=t.facetItem.FacetByName[n];return i==undefined?Infinity:i.FacetValues[0].Value}:u.Type==PivotViewer.Models.FacetType.DateTime?function(t){var i=t.facetItem.FacetByName[n];return i==undefined?new Date(864e13):new Date(i.FacetValues[0].Value)}:function(t){var u=t.facetItem.FacetByName[n],i,r;if(u==undefined)return"ZZZZZZZ";for(i=u.FacetValues,r=0;r<i.Length;r++)if(e[i[r]])return i[r].Value.toUpperCase();return i[0].Value.toUpperCase()},t=[-1,1][+!!t],function(n,i){return n=r(n),i=r(i),t*((i>n)-(n>i))}};GetMonthName=function(n){return["January","February","March","April","May","June","July","August","September","October","November","December"][n.getMonth()]};GetStandardHour=function(n){var t=n.getHours();return t==0?12:t>12?t-12:t};GetStandardSeconds=function(n){var t=n.getSeconds();return t<10?"0"+t:t};GetStandardMinutes=function(n){var t=n.getMinutes();return t<10?"0"+t:t};GetMeridian=function(n){return n.getHours()>11?"PM":"AM"};GetBuckets=function(n,t,i,r){var f,l,o,w,s,e,h,b,k,y;i==undefined&&(i=function(n){return n.Value});r==undefined&&(r=function(n){return n.Label.toString()});var u=[],c=n[0].facetItem.FacetByName[t].FacetValues[0],p=i(c),a=r(c),v={startRange:c.Value,endRange:c.Value,tiles:[n[0]],values:[p],ids:[],startLabel:a,endLabel:a};for(u.push(v),v.ids[n[0].facetItem.Id]=!0,f=1,l=0;f<n.length;f++){if(n[f].facetItem.FacetByName[t]==undefined)break;if(o=n[f].facetItem.FacetByName[t].FacetValues[0],i(o)>p){c=o;var a=r(o),p=i(o),v={startRange:o.Value,endRange:o.Value,tiles:[n[f]],values:[p],ids:[],startLabel:a,endLabel:a};v.ids[n[f].facetItem.Id]=!0;u.push(v);l++}else u[l].tiles.push(n[f]),u[l].ids[n[f].facetItem.Id]=!0,u[l].endRange=o.Value}if(u.length>10){for(w=Math.ceil(u.length/10),s=[],e=0,h=0;e<u.length;e++){if(b=e%w,b==0)s[h]=u[e];else{s[h].endRange=u[e].endRange;s[h].endLabel=u[e].endLabel;Array.prototype.push.apply(s[h].tiles,u[e].tiles);Array.prototype.push.apply(s[h].values,u[e].values);for(k in u[e].ids)s[h].ids[k]=!0}b+1==w&&h++}u=s}if(f!=n.length)for(y={startRange:"(no info)",endRange:"(no info)",tiles:[],values:[],ids:[],startLabel:"(no info)",endLabel:"(no info)"},u.push(y);f<n.length;f++)y.tiles.push(n[f]),y.ids[n[f].facetItem.Id]=!0;return u};
